(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{223:function(e,t,n){},224:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(77),l=n.n(o),i=n(12),u=n(1),s=n(39),c=n.n(s),f=function(){return(f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function p(){var e=JSON.parse(sessionStorage.plsAuth||"null");return e?+new Date>=e.expiresAt?null:e:null}var h=function(e){var t=e.error,n=e.message,r=e.retry;return a.a.createElement("div",null,n,r?a.a.createElement("button",{onClick:function(){return r()}},"Try again"):null,a.a.createElement("details",null,a.a.createElement("summary",null,"Error Details"),t.toString(),a.a.createElement("br",null),a.a.createElement("pre",null,JSON.stringify(t,null,2))))},m=function(e){var t=e.request,n=e.progressMessage,r=e.errorMessage,o=e.retry;if(!t)return null;if(t.error)return a.a.createElement(h,{error:t.error,message:r||"An error occurred",retry:o});if(t.busy){var l=t.progress;return a.a.createElement("div",{className:"request-status"},a.a.createElement("div",{className:"request-status-message"},(n||"Loading").replace("{n}",void 0!==l&&l.total?""+l.total:"")),l&&l.loaded?a.a.createElement("div",{className:"request-status-progress-wrapper"},a.a.createElement("span",null,l.loaded,"/",l.total),a.a.createElement("progress",{max:l.total,value:l.loaded})):null)}return null};var d=function(){function e(e){var t=this;this.cancelRequested=!1,this.onProgress=[],this.onComplete=[],this.onError=[],this.busy=!0,this._handleResolve=function(e){return t.busy=!1,t.result=e,t.onComplete.forEach((function(t){return t(e)})),e},this._handleError=function(e){return t.busy=!1,t.error=e,t.onError.forEach((function(t){return t(e)})),Promise.reject(e)},this._promise=this._initializePromise(e)}return e.prototype._initializePromise=function(e){var t,n,r=this;if((n=e)&&n.then&&"function"===typeof n.then)t=e;else{var a=e;t=new Promise((function(e,t){return a(e,t,r)}))}return t.then(this._handleResolve,this._handleError)},e.prototype.reportProgress=function(e){this.progress=e,void 0!==e&&this.onProgress.forEach((function(t){return t(e)}))},e.prototype.cancel=function(){this.cancelRequested||(this.cancelRequested=!0)},e}(),y=n(78),v=n.n(y),b=function(){return(b=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function E(e){var t=p();if(!t||!t.access_token)return Promise.reject(new Error("Not authenticated"));var n=b(b({},e.headers||{}),{Authorization:"Bearer "+t.access_token});return v.a.request(b(b({method:"GET"},e),{headers:n}))}var g=function(){return(g=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},k=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function l(e){try{u(r.next(e))}catch(t){o(t)}}function i(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,i)}u((r=r.apply(e,t||[])).next())}))},w=function(e,t){var n,r,a,o,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,r=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(!(a=(a=l.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){l=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){l.label=o[1];break}if(6===o[0]&&l.label<a[1]){l.label=a[1],a=o;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(o);break}a[2]&&l.ops.pop(),l.trys.pop();continue}o=t.call(e,l)}catch(i){o=[6,i],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}};function S(e,t,n,r){void 0===r&&(r=50);var a=0,o=[];return new d((function(l,i,u){!function s(){return k(this,void 0,void 0,(function(){var c,f;return w(this,(function(p){switch(p.label){case 0:return p.trys.push([0,2,,3]),[4,E({url:e,params:g(g({},t),{limit:r,offset:a})})];case 1:return(c=p.sent().data).items.forEach((function(e){return o.push(e)})),u.reportProgress({total:c.total,loaded:o.length,items:o}),u.cancelRequested?(i(new Error("cancel")),[2]):(c.next&&o.length<n?(a+=c.limit,setTimeout(s,16)):l(o),[3,3]);case 2:return f=p.sent(),[2,i(f)];case 3:return[2]}}))}))}()}))}var _=n(79),C=n.n(_),x=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function l(e){try{u(r.next(e))}catch(t){o(t)}}function i(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,i)}u((r=r.apply(e,t||[])).next())}))},O=function(e,t){var n,r,a,o,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,r=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(!(a=(a=l.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){l=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){l.label=o[1];break}if(6===o[0]&&l.label<a[1]){l.label=a[1],a=o;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(o);break}a[2]&&l.ops.pop(),l.trys.pop();continue}o=t.call(e,l)}catch(i){o=[6,i],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}};function P(e,t){return x(this,void 0,void 0,(function(){var n,r,a,o,l,i;return O(this,(function(u){switch(u.label){case 0:return[4,E({method:"GET",url:"https://api.spotify.com/v1/me"})];case 1:return n=u.sent(),r=n.data,[4,E({method:"POST",url:"https://api.spotify.com/v1/users/"+(a=r.id)+"/playlists",data:{name:e,description:"Playlist created by pls by @akx on "+(new Date).toISOString(),public:!1}})];case 2:return o=u.sent().data,l=o.id,i=C()(t,100),[2,new Promise((function(e){!function t(){return x(this,void 0,void 0,(function(){var n;return O(this,(function(r){switch(r.label){case 0:return i.length?(n=i.shift(),[4,E({method:"POST",url:"https://api.spotify.com/v1/users/"+a+"/playlists/"+l+"/tracks",data:{uris:n}})]):(e(!0),[2]);case 1:return r.sent(),setTimeout(t,16),[2]}}))}))}()}))]}}))}))}var q=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),N=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t}return q(t,e),t.prototype.componentDidMount=function(){this.loadData()},t.prototype.loadData=function(){var e,t=this,n=(void 0===e&&(e=65535),S("https://api.spotify.com/v1/me/playlists",{},e));n.onComplete.push((function(e){t.setState({playlists:e})})),n.onProgress.push((function(){t.forceUpdate()})),this.setState({playlistsRequest:n})},t.prototype.render=function(){var e=this,t=this.state.playlistsRequest;return t?t.result?a.a.createElement("table",{className:"visual-table"},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"Name"),a.a.createElement("th",null,"Public?"),a.a.createElement("th",null,"Collaborative?"),a.a.createElement("th",null,"Tracks"))),a.a.createElement("tbody",null,(this.state.playlists||[]).map((function(e){return a.a.createElement("tr",{key:e.id},a.a.createElement("td",null,a.a.createElement(i.b,{to:"/playlist/"+e.owner.id+"/"+e.id},a.a.createElement("b",null,e.name)," by ",e.owner.display_name||e.owner.id)),a.a.createElement("td",null,e.public?"Public":null),a.a.createElement("td",null,e.collaborative?"Collab":null),a.a.createElement("td",null,e.tracks.total))})))):a.a.createElement(m,{request:t,progressMessage:"Loading {n} playlists...",errorMessage:"Oops, an error occurred loading your playlists.",retry:function(){return e.loadData()}}):null},t}(a.a.Component),T=n(81),A=n.n(T),j=n(38),D=n.n(j),R=n(82),M=n.n(R),L=n(83),z=n.n(L),F=n(84),U=n.n(F),J=n(85),B=n.n(J),Q=n(86),I=n.n(Q),G=["time_signature","key","mode","tempo","acousticness","danceability","energy","instrumentalness","loudness","speechiness","valence","popularity"],W=["name","artistName","albumName","duration_ms","shuffleHash"].concat(G),H=["duration_ms"].concat(G),V=I()(H,"key","time_signature","mode"),$=["name","artistName","albumName"],Y=n(27),K=n.n(Y),X=function(e){return"time_signature"===e?"Timesig":K()(e).replace("_"," ")},Z=function(e){var t=e.filters,n=e.setFilterValue,r=[],o=[];return H.forEach((function(e){o.push(a.a.createElement("td",{key:e},a.a.createElement("input",{type:"number",value:t[e+":gte"]||"",size:3,onChange:function(t){n(e+":gte",t.target.value)}}))),r.push(a.a.createElement("td",{key:e},a.a.createElement("input",{type:"number",value:t[e+":lte"]||"",size:3,onChange:function(t){n(e+":lte",t.target.value)}})))})),a.a.createElement("table",{className:"numeric-filters"},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null),H.map((function(e){return a.a.createElement("th",{key:e},X(e))})))),a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("th",null,"\u2265"),o),a.a.createElement("tr",null,a.a.createElement("th",null,"\u2264"),r)))},ee=function(e){var t=e.sort,n=e.setSort,r=e.setShuffleSeed,o=e.reverse;return a.a.createElement("div",{className:"sort"},a.a.createElement("label",null,a.a.createElement("span",null,"Sort: \xa0"),a.a.createElement("select",{value:t,onChange:function(e){return n(e.target.value,o)}},a.a.createElement("option",{value:"original"},"Original sort"),W.map((function(e){return a.a.createElement("option",{key:e,value:e},X(e))})))),a.a.createElement("label",null,a.a.createElement("input",{type:"checkbox",checked:o,onChange:function(e){return n(t,e.target.checked)}}),a.a.createElement("span",null,"Reverse"))," ",a.a.createElement("button",{onClick:function(){return r(133713371337*Math.random())}},"Shuffle"))},te=function(e){var t=e.filters,n=e.setFilterValue;return a.a.createElement("div",{className:"string-filters"},$.map((function(e){return a.a.createElement("input",{key:e,placeholder:X(e)+" contains...",value:t[e+":contains"]||"",onChange:function(t){n(e+":contains",t.target.value)}})})))},ne=function(){return(ne=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},re=function(e){return a.a.createElement("fieldset",{className:"sort-and-filter"},a.a.createElement("legend",null,"Sort & Filter"),a.a.createElement(ee,ne({},e)),a.a.createElement("div",{className:"filters"},a.a.createElement(te,ne({},e)),a.a.createElement(Z,ne({},e))))},ae=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function l(e){try{u(r.next(e))}catch(t){o(t)}}function i(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,i)}u((r=r.apply(e,t||[])).next())}))},oe=function(e,t){var n,r,a,o,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,r=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(!(a=(a=l.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){l=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){l.label=o[1];break}if(6===o[0]&&l.label<a[1]){l.label=a[1],a=o;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(o);break}a[2]&&l.ops.pop(),l.trys.pop();continue}o=t.call(e,l)}catch(i){o=[6,i],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}};function le(e,t){return ae(this,void 0,void 0,(function(){return oe(this,(function(n){switch(n.label){case 0:return[4,E({url:"https://api.spotify.com/v1/audio-features",params:{ids:t.join(",")}})];case 1:return n.sent().data.audio_features.forEach((function(t){t&&e.set(t.id,t)})),t.forEach((function(t){e.has(t)||(console.warn("No analysis available for "+t),e.set(t,null))})),[2]}}))}))}var ie=new(function(){function e(){this.cache=new Map}return e.prototype.ensureLoaded=function(e){var t=this;return new d((function(n,r,a){var o=function(){return ae(t,void 0,void 0,(function(){var t,r,l=this;return oe(this,(function(i){switch(i.label){case 0:return t=e.filter((function(e){return e&&!l.cache.has(e)})),a.reportProgress({loaded:e.length-t.length,total:e.length}),t.length?(r=t.slice(0,100),[4,le(this.cache,r)]):[3,2];case 1:return i.sent(),setTimeout(o,16),[2];case 2:return n(),[2]}}))}))};o()}))},e.prototype.getDetails=function(e){return this.cache.get(e)||void 0},e}());var ue=n(87),se=n.n(ue);function ce(e,t,n){return t*n+e*(1-n)}var fe=new(function(){function e(e,t,n,r){void 0===r&&(r=1),this.id=se()(),this.classPrefix="qsc"+this.id+"_",this.nClasses=e,this.rgb1=t,this.rgb2=n,this.opacity=r}return e.prototype.getRules=function(){for(var e=[],t=this.rgb1,n=t[0],r=t[1],a=t[2],o=this.rgb2,l=o[0],i=o[1],u=o[2],s=this.nClasses,c=0;c<s;c+=1){var f=c/(s-1),p=ce(n,l,f),h=ce(r,i,f),m=ce(a,u,f);e.push("."+this.classPrefix+c+" {\n          background: rgba("+Math.round(p)+", "+Math.round(h)+", "+Math.round(m)+", "+this.opacity+");\n        }")}return e},e.prototype.getClassName=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=1);var r=(e-t)/(n-t),a=Math.max(0,Math.min(this.nClasses-1,Math.round(this.nClasses*r)));return""+this.classPrefix+a},e.prototype.install=function(){var e=document.createElement("style");e.id="qscale"+this.id,e.type="text/css",e.textContent=this.getRules().join("\n"),document.head.appendChild(e),this.styleTag=e},e}())(20,[253,147,38],[110,239,112],.9);fe.install();var pe=function(e){var t=e.entry,n=e.colorize,r=e.numberLimits;return a.a.createElement("tr",{key:t.originalIndex},a.a.createElement("td",null,(t.originalIndex||0)+1),a.a.createElement("td",null,t.artists.map((function(e){return e.name})).join(", ")),a.a.createElement("td",null,t.name),a.a.createElement("td",null,t.album?t.album.name:null),a.a.createElement("td",null,function(e){var t=Math.round(e/1e3);return Math.floor(t/60)+":"+(t%60).toString().padStart(2,"0")}(t.duration_ms)),G.map((function(e){var o=t[e],l=n&&r[e]?fe.getClassName(o,r[e][0],r[e][1]):void 0;return a.a.createElement("td",{key:e,title:e,className:l},o)})))};function he(e,t){if(0===t.length)return e;for(var n=0;n<t.length;n++){e=(e<<5)-e+t.charCodeAt(n),e|=0}return e}var me=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function l(e){try{u(r.next(e))}catch(t){o(t)}}function i(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,i)}u((r=r.apply(e,t||[])).next())}))},de=function(e,t){var n,r,a,o,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,r=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(!(a=(a=l.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){l=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){l.label=o[1];break}if(6===o[0]&&l.label<a[1]){l.label=a[1],a=o;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(o);break}a[2]&&l.ops.pop(),l.trys.pop();continue}o=t.call(e,l)}catch(i){o=[6,i],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}};function ye(e){return me(this,void 0,void 0,(function(){var t,n;return de(this,(function(r){switch(r.label){case 0:if(!e.length)return alert("No tracks to create a playlist from."),[2];if(!(t=prompt("What should the new playlist be called?")))return[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,P(t,e)];case 2:return r.sent(),[3,4];case 3:return n=r.sent(),console.error(n),alert("Error creating playlist: "+n),[3,4];case 4:return[2]}}))}))}var ve=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),be=function(){return(be=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};var Ee=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={playlistEntriesRequest:null,trackDetailsRequest:null,sort:"original",reverse:!1,shuffleSeed:42*Math.random(),filters:{},colorize:!1},t}return ve(t,e),t.prototype.componentDidMount=function(){this.loadPlaylistEntries()},t.prototype.loadPlaylistEntries=function(){var e=this,t=this.props.playlist,n=function(e,t,n){void 0===n&&(n=65535);var r=S("https://api.spotify.com/v1/users/"+e+"/playlists/"+t+"/tracks",{},n,100);return r.onComplete.push((function(e){for(var t=0;t<e.length;t+=1)e[t].originalIndex=t})),r}(t.owner.id,t.id);n.onProgress.push((function(){e.forceUpdate()})),n.onComplete.push((function(t){e.setState({playlistEntries:t}),e.loadTrackDetails()})),this.setState({playlistEntriesRequest:n})},t.prototype.loadTrackDetails=function(){var e=this,t=(this.state.playlistEntries||[]).map((function(e){return e.track.id}));if(t.length){var n=ie.ensureLoaded(t);n.onProgress.push((function(){e.forceUpdate()})),n.onComplete.push((function(){e.setState({trackDetailsRequest:null})})),this.setState({trackDetailsRequest:n})}},t.prototype.downloadEntriesJSON=function(e){var t=this.props.playlist,n=JSON.stringify(e,null,2);!function(e,t){var n=URL.createObjectURL(e),r=Object.assign(document.createElement("a"),{href:n,download:t});document.body.appendChild(r),r.click(),setTimeout((function(){r.parentNode&&r.parentNode.removeChild(r),URL.revokeObjectURL(n)}),500)}(new Blob([n],{type:"application/json"}),"pls-"+t.name+".json")},t.prototype.sortAndFilterEntries=function(e){var t=this.state,n=t.sort,r=t.filters,a=t.reverse,o=t.shuffleSeed,l=z()(r).filter((function(e){return""!==e[1]})),i=(e||[]).map((function(e){return function(e,t){return void 0===t&&(t=0),be(be(be(be({},e),e.track),ie.getDetails(e.track.id)||{}),{artistName:e.track.artists.map((function(e){return e.name})).join(", "),albumName:e.track.album.name,shuffleHash:he(t,e.originalIndex+"-"+e.track)})}(e,o)})).filter((function(e){return l.every((function(t){var n=t[0],r=t[1],a=n.split(":"),o=a[0],l=a[1],i=r;if(("gte"===l||"lte"===l)&&(i=parseFloat(i),Number.isNaN(i)))return!0;var u=e[o];return void 0!==u&&null!==u&&("gte"===l?u>=i:"lte"===l?u<=i:"contains"===l?u.toString().includes(i.toString()):(console.warn(n,o,l,r),!0))}))}));if("original"!==n){var u=n;i=A()(i,(function(e){return D()(e,u)}))}return a&&(i=M()(i)),i},t.prototype.render=function(){var e,t=this,n=this.state,r=n.playlistEntries,o=n.playlistEntriesRequest,l=n.trackDetailsRequest,i=n.colorize;if(!o)return null;if(!o.result)return a.a.createElement(m,{request:o,progressMessage:"Loading playlist entries...",errorMessage:"Oops, an error occurred loading these entries.",retry:function(){return t.loadPlaylistEntries()}});if(l&&(e=a.a.createElement(m,{request:l,progressMessage:"Loading track analysis...",retry:function(){return t.loadTrackDetails()}})),!r)return null;var u=this.sortAndFilterEntries(r),s=i?function(e){var t={};return V.forEach((function(n){var r=U()(e,n),a=Math.min.apply(null,r),o=Math.max.apply(null,r);t[n]=[a,o]})),t}(u):{};return a.a.createElement("div",null,e,a.a.createElement(re,{sort:this.state.sort,reverse:this.state.reverse,filters:this.state.filters,setSort:function(e,n){return t.setState({sort:e,reverse:n})},setShuffleSeed:function(e){return t.setState({sort:"shuffleHash",shuffleSeed:e})},setFilterValue:function(e,n){var r,a=""===n?{$unset:[e]}:((r={})[e]={$set:n},r),o=B()(t.state.filters,a);return t.setState({filters:o})}}),a.a.createElement("fieldset",{className:"tools"},a.a.createElement("legend",null,"Tools"),a.a.createElement("button",{disabled:0===u.length,onClick:function(){return ye(u.map((function(e){return e.uri})).filter(Boolean))}},"Create New Playlist of ",u.length," Tracks"),a.a.createElement("button",{disabled:0===u.length,onClick:function(){return t.downloadEntriesJSON(u)}},"Export JSON Track Data"),a.a.createElement("label",null,a.a.createElement("input",{type:"checkbox",checked:i,onChange:function(e){return t.setState({colorize:e.target.checked})}}),"Colorize Numbers")),a.a.createElement("table",{className:"visual-table"},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"#"),a.a.createElement("th",null,"Artist"),a.a.createElement("th",null,"Track"),a.a.createElement("th",null,"Album"),a.a.createElement("th",null,"Duration"),G.map((function(e){return a.a.createElement("th",{key:e},X(e))})))),a.a.createElement("tbody",null,u.map((function(e){return a.a.createElement(pe,{entry:e,key:e.originalIndex,colorize:i,numberLimits:s})})))))},t}(a.a.Component),ge=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ke=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t}return ge(t,e),t.prototype.componentDidMount=function(){this.loadData()},t.prototype.loadData=function(){var e=this,t=this.props.match.params,n=function(e,t){return new d(E({url:"https://api.spotify.com/v1/users/"+e+"/playlists/"+t}).then((function(e){return e.data})))}(t.user_id,t.playlist_id);n.onComplete.push((function(t){e.setState({playlist:t})})),this.setState({playlistRequest:n})},t.prototype.render=function(){var e=this,t=this.state.playlistRequest;if(!t)return null;if(!t.result)return a.a.createElement(m,{request:t,progressMessage:"Loading playlist...",errorMessage:"Oops, an error occurred loading this playlists.",retry:function(){return e.loadData()}});if(!this.state.playlist)return a.a.createElement("div",null,"Something unexpected happened. Sorry.");var n=this.state.playlist;return a.a.createElement("div",null,a.a.createElement("h1",null,n.name),a.a.createElement(Ee,{playlist:n}))},t}(a.a.Component);function we(e,t){var n=E({url:"https://api.spotify.com/v1/search",params:{q:e,type:t.join(","),limit:50}}).then((function(e){return e.data}));return new d(n)}function Se(e){var t=E({url:"https://api.spotify.com/v1/albums/"+e}).then((function(e){return e.data}));return new d(t)}var _e=function(e){return e.map((function(e){return e.name})).join(", ")};var Ce=function(e){var t=e.query,n=e.onAddTrack,o=e.onAddAlbum,l=e.onDeleteQuery,i=Object(r.useState)(!1),u=i[0],s=i[1],c=t.request.result,f=c&&c.albums?c.albums.items:[],p=c&&c.tracks?c.tracks.items:[];return a.a.createElement("li",null,t.query," \u2013 ",t.request.busy?"Busy...":f.length+" albums, "+p.length+" tracks"," ",a.a.createElement("a",{href:"#",onClick:function(e){s(!u),e.preventDefault()}},u?"(show)":"(hide)")," ",a.a.createElement("a",{href:"#",onClick:function(e){l(t),e.preventDefault()}},"(delete)"),u?null:a.a.createElement(a.a.Fragment,null,a.a.createElement("ul",null,function(e,t){return e.map((function(e){return a.a.createElement("li",{key:e.id},a.a.createElement(a.a.Fragment,null,K()(e.album_type),": ",_e(e.artists)," \u2013 ",e.name," (",e.total_tracks," ","tracks)",a.a.createElement("a",{href:"#",onClick:function(n){t(e),n.preventDefault()}},"[+]")))}))}(f,o)),a.a.createElement("ul",null,function(e,t){return e.map((function(e){return a.a.createElement("li",{key:e.id},a.a.createElement(a.a.Fragment,null,"Track: ",_e(e.artists)," \u2013 ",e.name," (",e.album.name,")",a.a.createElement("a",{href:"#",onClick:function(n){t(e),n.preventDefault()}},"[+]")))}))}(p,n))))},xe=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Oe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={playlist:[],queries:[],searchAlbums:!0,searchTracks:!0,searchContent:""},t.executeSearch=function(){var e=[t.state.searchAlbums?"album":"",t.state.searchTracks?"track":""].filter(Boolean),n=t.state.searchContent.split("\n").map((function(e){return e.trim()})).filter(Boolean),r=new Set(t.state.queries.map((function(e){return e.query}))),a=[];e.length&&(n.forEach((function(n){if(!r.has(n)){var o=we(n,e);o.onComplete.push((function(){t.forceUpdate()})),a.push({query:n,request:o})}})),a.length&&t.setState((function(e){return{queries:e.queries.concat(a)}})))},t.onAddTrack=function(e){t.addTracks([e])},t.addTracks=function(e){t.setState((function(t){var n=e.filter((function(e){return!t.playlist.find((function(t){return t.id===e.id}))}));return{playlist:t.playlist.concat(n)}}))},t.onAddAlbum=function(e){Se(e.id).onComplete.push((function(e){t.addTracks(e.tracks.items)}))},t.savePlaylist=function(){return ye(t.state.playlist.map((function(e){return e.uri})).filter(Boolean))},t.onDeleteQuery=function(e){t.setState((function(n){t.setState({queries:n.queries.filter((function(t){return t!==e}))})}))},t.removeQueriesWithResults=function(){t.setState((function(e){var n=e.queries;t.setState({queries:n.filter((function(e){var t,n,r,a=e.request.result;return void 0===a||!(null===(t=a.albums)||void 0===t?void 0:t.items.length)&&(!(null===(n=a.tracks)||void 0===n?void 0:n.items.length)&&!(null===(r=a.artists)||void 0===r?void 0:r.items.length))}))})}))},t}return xe(t,e),t.prototype.render=function(){var e=this;return a.a.createElement("div",{style:{display:"flex"}},a.a.createElement("div",{style:{maxWidth:"350px",flex:1}},a.a.createElement("textarea",{value:this.state.searchContent,onChange:function(t){return e.setState({searchContent:t.target.value})},rows:10,style:{width:"100%"},placeholder:"Enter search queries here."}),a.a.createElement("br",null),a.a.createElement("button",{style:{width:"100%",display:"block"},onClick:this.executeSearch},"Search"),a.a.createElement("label",null,a.a.createElement("input",{type:"checkbox",checked:this.state.searchAlbums,onChange:function(t){return e.setState({searchAlbums:t.target.checked})}}),"Albums"),a.a.createElement("label",null,a.a.createElement("input",{type:"checkbox",checked:this.state.searchTracks,onChange:function(t){return e.setState({searchTracks:t.target.checked})}}),"Tracks"),a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement("button",{style:{width:"100%",display:"block"},onClick:function(){return e.setState({queries:[]})}},"Clear Queries"),a.a.createElement("button",{style:{width:"100%",display:"block"},onClick:this.removeQueriesWithResults},"Remove Queries with Results")),a.a.createElement("div",{style:{flex:3}},a.a.createElement("ul",null,this.state.queries.map((function(t){return a.a.createElement(Ce,{key:t.query,query:t,onAddTrack:e.onAddTrack,onAddAlbum:e.onAddAlbum,onDeleteQuery:e.onDeleteQuery})})))),a.a.createElement("div",{style:{flex:3}},a.a.createElement("ul",null,this.state.playlist.map((function(e){return a.a.createElement("li",{key:e.id},_e(e.artists)," \u2013 ",e.name)}))),this.state.playlist.length?a.a.createElement("button",{onClick:this.savePlaylist},"Save Playlist..."):null))},t}(a.a.Component),Pe=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),qe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Pe(t,e),t.prototype.UNSAFE_componentWillMount=function(){!function(){var e=c.a.parse(location.hash.replace(/^#/,""));if(e.access_token&&"Bearer"===e.token_type){var t=f({expiresAt:+new Date+1e3*parseInt(""+e.expires_in,10)},e);return sessionStorage.plsAuth=JSON.stringify(t),location.hash="",t}}()},t.prototype.render=function(){var e=this;return p()?a.a.createElement(i.a,null,a.a.createElement("div",null,a.a.createElement("nav",null,a.a.createElement(i.b,{to:"/"},"List Playlists"),a.a.createElement(i.b,{to:"/search-tool"},"Search Tool"),a.a.createElement("a",{href:"#",onClick:function(t){sessionStorage.plsAuth="null",e.forceUpdate(),t.preventDefault()}},"Logout")),a.a.createElement("article",null,a.a.createElement(u.a,{path:"/search-tool",exact:!0,component:Oe}),a.a.createElement(u.a,{path:"/playlist/:user_id/:playlist_id",component:ke}),a.a.createElement(u.a,{path:"/",exact:!0,component:N})))):a.a.createElement("div",{className:"please-auth"},a.a.createElement("p",null,"You have not authenticated with Spotify, or your authentication has expired."),a.a.createElement("button",{onClick:function(){location.href="https://accounts.spotify.com/authorize?"+c.a.stringify({response_type:"token",client_id:"06840691930b4872b535ede501942995",scope:["user-read-private","playlist-modify-private","playlist-modify-public","playlist-read-private","playlist-read-collaborative"].join(" "),redirect_uri:location.href.replace(/[?#]+.*/g,"")})}},"Authenticate"))},t}(a.a.Component),Ne=(n(223),document.createElement("main"));document.body.appendChild(Ne),l.a.render(a.a.createElement(qe,null),Ne)},88:function(e,t,n){e.exports=n(224)}},[[88,2,0]]]);